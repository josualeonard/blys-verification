(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{30:function(t,e,s){},37:function(t,e,s){},39:function(t,e,s){"use strict";s.r(e);var i=s(1),a=s(0),n=s.n(a),r=s(10),c=s.n(r),o=(s(30),s(11)),u=s(12),l=s(8),d=s(14),h=s(13),f=s(17),b=s(4),j=s(18),g=s.n(j),p=s(22),v=s(38),m=function(t){Object(d.a)(s,t);var e=Object(h.a)(s);function s(t){var i;return Object(o.a)(this,s),(i=e.call(this,t)).state={digits:[],errors:[],isEmpty:!1,status:0,statusMessage:"",isVerifying:!1,isVerified:!1},i.state={digits:[],errors:[],isEmpty:!1,status:0,statusMessage:"",isVerifying:!1,isVerified:!1},i.setAppState=i.setAppState.bind(Object(l.a)(i)),i.handleFocus=i.handleFocus.bind(Object(l.a)(i)),i.handleKeyPress=i.handleKeyPress.bind(Object(l.a)(i)),i.handlePaste=i.handlePaste.bind(Object(l.a)(i)),i.handleKeyDown=i.handleKeyDown.bind(Object(l.a)(i)),i.handleSubmit=i.handleSubmit.bind(Object(l.a)(i)),i}return Object(u.a)(s,[{key:"setAppState",value:function(t,e){this.props.setAppState(t,e)}},{key:"handleKeyDown",value:function(t){var e=t.keyCode,s=t.target,i=parseInt(s.getAttribute("data-field-id"));switch(e){case 8:this.onFieldUpdate(s,-1,i,-1);break;case 37:case 38:this.gotoPrevField(i);break;case 39:case 40:this.gotoNextField(i)}}},{key:"handleKeyPress",value:function(t){var e=parseInt(t.key),s=t.target,i=parseInt(s.getAttribute("data-field-id"));this.onFieldUpdate(s,e,i)}},{key:"handlePaste",value:function(t){var e=t.clipboardData.getData("Text").replace(/[^0-9]/g,""),i=t.target,a=parseInt(i.getAttribute("data-field-id")),n=this.state.digits,r=this.state.errors;if(i.blur(),e.length>0)for(var c=0,o=1;o<=s.digits;o++){var u=document.getElementById("input"+o);if(o<a&&(n[o-1]||(n[o-1]="",r[o-1]=!0)),o>=a){var l=e[c];c++,isNaN(l)?n[o-1]||(n[o-1]="",r[o-1]=!0):(n[o-1]=l,r[o-1]=!1,u&&(u.value=l))}}}},{key:"onFieldUpdate",value:function(t,e,i){var a=this,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=this.state.digits,c=this.state.errors,o=this.state.isEmpty;if(!isNaN(i)){if(r.length<i)for(var u=1;u<=i;u++)r[u-1]||(r[u-1]=""),c[u-1]||(c[u-1]=!1);o=!1,isNaN(e)?(c[i-1]=!0,t.blur(),t.value="",setTimeout((function(){t.focus(),a.setState({status:-1,digits:r,errors:c,isEmpty:o})}),100)):(r[i-1]=e>=0?e.toString():"",c[i-1]=!1,this.setState({status:0,digits:r,errors:c,isEmpty:o},(function(){t.blur(),t.value=e>=0?e:"",setTimeout((function(){n>0?a.gotoNextField(i,i===s.digits):a.gotoPrevField(i)}),50)})))}}},{key:"gotoNextField",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=document.getElementById("input"+(t+1<=s.digits?t+1:t));i&&(i.blur(),e||setTimeout((function(){i.focus()}),50))}},{key:"gotoPrevField",value:function(t){var e=document.getElementById("input"+(t-1>=1?t-1:t));e&&(e.blur(),setTimeout((function(){e.focus()}),50))}},{key:"handleFocus",value:function(t){this.state.isVerifying?t.target.blur():(this.setState({status:0}),t.target.select())}},{key:"handleSubmit",value:function(t){var e=this;t.preventDefault();var i=this.state.digits,a=this.state.errors,n=!0,r=0;if(i.length<s.digits){n=!1;for(var c=1;c<=s.digits;c++)(!i[c-1]||i[c-1].length<=0)&&(a[c-1]=!0,r++)}else for(var o=1;o<=i.length;o++)i[o-1].length<=0&&(n=!1,a[o-1]=!0);return n?this.setState({status:0,isVerifying:!0},(function(){e.verify().then((function(t){var s=t.body||{},i="success"===(s.status||""),a=s.message||"";e.setState({isVerifying:!1,status:i?1:-3,statusMessage:a},(function(){i&&setTimeout((function(){e.setAppState(i,a),e.setState({isVerified:!0})}),2e3)}))}))})):this.setState({status:-2,errors:a,isEmpty:r===s.digits}),!1}},{key:"verify",value:function(){var t=Object(p.a)(g.a.mark((function t(){var e,s;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.state.digits.join(""),t.next=3,fetch("/api/v1.0/verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:e})});case 3:return s=t.sent,t.next=6,s.json();case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var t=document.getElementById("input1");t&&t.focus()}},{key:"message",value:function(){switch(this.state.status){case-1:return"Invalid input, only use number";case-2:return this.state.isEmpty?"Verification code cannot be empty":"Incomplete verification code";case-3:case 1:return this.state.statusMessage}return""}},{key:"render",value:function(){var t=this;return this.state.isVerified?Object(i.jsx)(b.a,{to:{pathname:"/success"}}):Object(i.jsx)(a.Fragment,{children:Object(i.jsx)("div",{className:"form-container"+(this.state.isVerifying?" verifying":""),children:Object(i.jsxs)("form",{id:"verification",className:"form",onSubmit:this.handleSubmit,children:[Object(i.jsx)(v,{in:0!==this.state.status,timeout:300,classNames:"alert",unmountOnExit:!0,children:Object(i.jsx)("div",{className:"alert",children:Object(i.jsx)("h3",{className:this.state.status>0?"success":"error",children:this.message()})})}),Object(i.jsx)("h1",{className:"line",children:"Verification code:"}),Object(i.jsx)("div",{className:"line",children:Array.from(Array(6),(function(e,s){return Object(i.jsx)("input",{id:"input"+(s+1),"data-field-id":s+1,type:"text",className:t.state.errors.length>=s&&t.state.errors[s]?"error":"",defaultValue:t.state.digits.length>=s?t.state.digits[s]:"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,onKeyPress:t.handleKeyPress,onPaste:t.handlePaste,onKeyDown:t.handleKeyDown,onFocus:t.handleFocus},s+1)}))}),Object(i.jsx)("div",{className:"line",children:this.state.isVerifying?Object(i.jsx)("div",{className:"submit",children:Object(i.jsxs)("div",{className:"lds-ellipsis",children:[Object(i.jsx)("div",{}),Object(i.jsx)("div",{}),Object(i.jsx)("div",{}),Object(i.jsx)("div",{})]})}):Object(i.jsx)("button",{type:"submit",children:"Submit"})})]})})})}}]),s}(a.Component);m.digits=6;var y=function(t){Object(d.a)(s,t);var e=Object(h.a)(s);function s(t){var i;return Object(o.a)(this,s),(i=e.call(this,t)).state={},i}return Object(u.a)(s,[{key:"render",value:function(){return Object(i.jsx)(a.Fragment,{children:Object(i.jsx)("div",{className:"form-container",children:Object(i.jsx)("div",{className:"form",children:this.props.isLogin?Object(i.jsxs)(a.Fragment,{children:[Object(i.jsx)("h1",{className:"line",children:this.props.statusMessage}),Object(i.jsx)("h3",{className:"line",children:"You have entered the correct verification code"})]}):Object(i.jsx)(a.Fragment,{children:Object(i.jsx)("h1",{className:"line",children:"You are not verified yet"})})})})})}}]),s}(a.Component),O=(s(37),function(t){Object(d.a)(s,t);var e=Object(h.a)(s);function s(t){var i;return Object(o.a)(this,s),(i=e.call(this,t)).state={isLogin:!1,statusMessage:""},i.state={isLogin:!1,statusMessage:"Not authenticated"},i.setAppState=i.setAppState.bind(Object(l.a)(i)),i}return Object(u.a)(s,[{key:"setAppState",value:function(t,e){this.setState({isLogin:t,statusMessage:e})}},{key:"render",value:function(){return Object(i.jsx)(a.Fragment,{children:Object(i.jsx)(f.a,{children:Object(i.jsxs)(b.d,{children:[Object(i.jsx)(b.b,{path:"/success",children:Object(i.jsx)(y,{isLogin:this.state.isLogin,statusMessage:this.state.statusMessage})}),Object(i.jsx)(b.b,{path:"/",children:Object(i.jsx)(m,{setAppState:this.setAppState})})]})})})}}]),s}(a.Component)),x=function(t){t&&t instanceof Function&&s.e(3).then(s.bind(null,40)).then((function(e){var s=e.getCLS,i=e.getFID,a=e.getFCP,n=e.getLCP,r=e.getTTFB;s(t),i(t),a(t),n(t),r(t)}))};c.a.render(Object(i.jsx)(n.a.StrictMode,{children:Object(i.jsx)(O,{})}),document.getElementById("root")),x()}},[[39,1,2]]]);
//# sourceMappingURL=main.67101a57.chunk.js.map